{% extends "base.html" %}

{% block content %}
<h1>Fastside [<a href="https://github.com/cofob/fastside">GitHub</a>] [<a href="/configure">Configure</a>]</h1>
<hr>
<h3>Last synced {{ time }}</h3>
<div>
  <ul>
    {% for (name, crawled_service) in crawled_services %}
    <li><a href="/{{ crawled_service.name }}/">{{ crawled_service.name }}</a>
      Aliases: [{% for alias in services[name].aliases %}{% if loop.index != 1 %}, {% endif %}<code>{{ alias }}</code>{%
      endfor %}].
      {% if services[name].source_link.is_some() %}
      {% let source_link = services[name].source_link.as_ref().unwrap().as_str() %}
      <a href="{{ source_link }}" target="_blank">Source code</a>.
      {% endif %}
      Fallback: <code>{{ services[name].fallback }}</code>
    </li>
    <ul>
      {% let instances = crawled_service.instances|sort_crawled_instances %}
      {% for instance in instances %}
      <li>
        <a href="{{ instance.url }}">{{ instance.url }}</a> <span>Status:
          <code>{{ instance.status }}</code></span> <span>Tags: {% for tag in instance.tags %}{% if loop.index != 1 %},
          {% endif %}
          <code>{{ tag }}</code>{% endfor %}</span>
      </li>
      {% endfor %}
    </ul>
    {% endfor %}
  </ul>
</div>
{% endblock %}
